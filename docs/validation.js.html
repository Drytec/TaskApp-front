<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: validation.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: validation.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file form-validation.js
 * @description Handles client-side validation for signup and login forms, including password rules and real-time error display.
 */

/** @type {HTMLFormElement} */
const form = document.getElementById('form');

/** @type {HTMLInputElement} */
const nameInput = form.querySelector('[name="name"]');
const lastNamesInput = form.querySelector('[name="lastNames"]');
const ageInput = form.querySelector('[name="age"]');
const emailInput = form.querySelector('[name="email"]');
const passwordInput = form.querySelector('[name="password"]');
const confirmPasswordInput = form.querySelector('[name="confirmPassword"]');

/** @type {HTMLElement} */
const errorMessage = document.getElementById('error-message');

/** @type {Object&lt;string, HTMLElement>} */
const rules = {
    length: document.getElementById('rule-length'),
    uppercase: document.getElementById('rule-uppercase'),
    number: document.getElementById('rule-number'),
    special: document.getElementById('rule-special')
};

/**
 * Marks an element as valid.
 * @param {HTMLElement} element
 */
function setValid(element) {
    element.classList.add('valid');
    element.classList.remove('invalid');
}

/**
 * Marks an element as invalid.
 * @param {HTMLElement} element
 */
function setInvalid(element) {
    element.classList.add('invalid');
    element.classList.remove('valid');
}

/**
 * Updates password validation rules UI.
 * @param {string} password - The password to validate
 */
function updatePasswordRules(password) {
    password.length >= 8 ? setValid(rules.length) : setInvalid(rules.length);
    /[A-Z]/.test(password) ? setValid(rules.uppercase) : setInvalid(rules.uppercase);
    /[0-9]/.test(password) ? setValid(rules.number) : setInvalid(rules.number);
    /[!@#$%^&amp;*]/.test(password) ? setValid(rules.special) : setInvalid(rules.special);
}

/**
 * Validates the signup form inputs.
 * @param {string} name
 * @param {string} lastNames
 * @param {number|string} age
 * @param {string} email
 * @param {string} password
 * @param {string} confirmPassword
 * @returns {string[]} Array of error messages, empty if no errors
 */
function getSignupFormErrors(name, lastNames, age, email, password, confirmPassword) {
    let errors = [];
    if (name === '' || name === null) {
        errors.push('Nombre es requerido');
        nameInput.classList.add('incorrect');
    }
    if (lastNames === '' || lastNames === null) {
        errors.push('Apellidos son requeridos');
        lastNamesInput.classList.add('incorrect');
    }
    if (age === '' || age === null) {
        errors.push('Edad es requerida');
        ageInput.classList.add('incorrect');
    }
    if (age &lt; 0) {
        errors.push('Edad no puede ser negativa');
        ageInput.classList.add('incorrect');
    }
    if (email === '' || email === null) {
        errors.push('Correo Electrónico es requerido');
        emailInput.classList.add('incorrect');
    }
    if (!/[@.]/.test(email)) {
        errors.push('El correo electrónico es inválido');
        emailInput.classList.add('incorrect');
    }
    if (password === '' || password === null) {
        errors.push('Contraseña es requerida');
        passwordInput.classList.add('incorrect');
    }
    if (password !== confirmPassword) {
        errors.push('Las contraseñas no coinciden');
        confirmPasswordInput.classList.add('incorrect');
    }

    if (password.length &lt; 8 || !/[A-Z]/.test(password) || !/[0-9]/.test(password) || !/[!@#$%^&amp;*]/.test(password)) {
        errors.push('La contraseña es invalida');
    }

    return errors;
}

/**
 * Validates the login form inputs.
 * @param {string} email
 * @param {string} password
 * @returns {string[]} Array of error messages, empty if no errors
 */
function getLoginFormErrors(email, password) {
    let errors = [];
    if (email === '' || email === null) {
        errors.push('Correo Electrónico es requerido');
        emailInput.classList.add('incorrect');
    }
    if (password === '' || password === null) {
        errors.push('Contraseña es requerida');
        passwordInput.classList.add('incorrect');
    }
    return errors;
}

/**
 * Handles form submission for signup/login, validates inputs, and displays errors.
 */
form.addEventListener('submit', (e) => {
    form.querySelectorAll('.incorrect').forEach(el => el.classList.remove('incorrect'));
    let errors = [];
    if (nameInput) {
        errors = getSignupFormErrors(
            nameInput.value,
            lastNamesInput.value,
            ageInput.value,
            emailInput.value,
            passwordInput.value,
            confirmPasswordInput.value
        );
    } else {
        errors = getLoginFormErrors(emailInput.value, passwordInput.value);
    }

    if (errors.length > 0) {
        e.preventDefault();
        errorMessage.innerText = errors.join(" - ");
    }
});

// Update password rules on input
passwordInput.addEventListener('input', () => {
    updatePasswordRules(passwordInput.value);
});

// Remove incorrect class on input
const allInputs = [nameInput, lastNamesInput, ageInput, emailInput, passwordInput, confirmPasswordInput];
allInputs.forEach(input => {
    input.addEventListener('input', () => {
        if (input.classList.contains('incorrect')) {
            input.classList.remove('incorrect');
        }
    });
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#API_URL">API_URL</a></li><li><a href="global.html#checkAuth">checkAuth</a></li><li><a href="global.html#createTask">createTask</a></li><li><a href="global.html#deleteTask">deleteTask</a></li><li><a href="global.html#errorMessage">errorMessage</a></li><li><a href="global.html#form">form</a></li><li><a href="global.html#getAllTasks">getAllTasks</a></li><li><a href="global.html#getLoginFormErrors">getLoginFormErrors</a></li><li><a href="global.html#getSignupFormErrors">getSignupFormErrors</a></li><li><a href="global.html#getTask">getTask</a></li><li><a href="global.html#getToken">getToken</a></li><li><a href="global.html#isAuthenticated">isAuthenticated</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#nameInput">nameInput</a></li><li><a href="global.html#removeToken">removeToken</a></li><li><a href="global.html#rules">rules</a></li><li><a href="global.html#saveToken">saveToken</a></li><li><a href="global.html#setInvalid">setInvalid</a></li><li><a href="global.html#setValid">setValid</a></li><li><a href="global.html#signup">signup</a></li><li><a href="global.html#updatePasswordRules">updatePasswordRules</a></li><li><a href="global.html#updateTask">updateTask</a></li><li><a href="global.html#updateUser">updateUser</a></li><li><a href="global.html#validateTask">validateTask</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Tue Sep 23 2025 00:37:12 GMT-0500 (hora estándar de Colombia)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
