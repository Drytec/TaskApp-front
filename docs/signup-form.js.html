<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: signup-form.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: signup-form.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file signup.js
 * @description Handles the signup form, including input validation, password requirements, and API request to create a new user account.
 */

document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('.signup-form');
    const firstNameInput = document.getElementById('firstName');
    const lastNameInput = document.getElementById('lastName');
    const ageInput = document.getElementById('age');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const confirmPasswordInput = document.getElementById('confirmPassword');
    const signupBtn = document.getElementById('signup-btn');
    const btnText = signupBtn.querySelector('.btn-text');
    const spinner = document.getElementById('signup-spinner');

    /** Password requirements elements */
    const requirements = {
        length: document.getElementById('req-length'),
        uppercase: document.getElementById('req-uppercase'),
        number: document.getElementById('req-number'),
        special: document.getElementById('req-special')
    };

    /**
     * Show a toast message
     * @param {string} message - The message to display
     * @param {string} [type='error'] - The type of message ('error' | 'success')
     */
    function showToast(message, type = 'error') {
        const toast = document.getElementById('toast');
        const toastMessage = toast.querySelector('.toast-message');
        
        toastMessage.textContent = message;
        toast.classList.remove('show', 'error', 'success');
        toast.classList.add('toast', type, 'show');
        
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
    }

    /**
     * Validate email format
     * @param {string} email - Email to validate
     * @returns {boolean} True if valid, false otherwise
     */
    function validateEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

    /**
     * Validate password according to requirements
     * @param {string} password - Password to validate
     * @returns {boolean} True if all requirements are met
     */
    function validatePassword(password) {
        const checks = {
            length: password.length >= 8,
            uppercase: /[A-Z]/.test(password),
            number: /[0-9]/.test(password),
            special: /[!@#$%^&amp;*]/.test(password)
        };
        
        Object.keys(checks).forEach(key => {
            if (checks[key]) requirements[key].classList.add('met');
            else requirements[key].classList.remove('met');
        });

        return Object.values(checks).every(check => check);
    }

    /**
     * Clear validation error from input
     * @param {HTMLInputElement} input - Input element to clear
     */
    function clearError(input) {
        const errorElement = document.getElementById(`${input.id}-error`);
        if (errorElement) errorElement.textContent = '';
        input.classList.remove('error');
    }

    /**
     * Show validation error on input
     * @param {HTMLInputElement} input - Input element to mark as error
     * @param {string} message - Error message
     */
    function showError(input, message) {
        const errorElement = document.getElementById(`${input.id}-error`);
        if (errorElement) errorElement.textContent = message;
        input.classList.add('error');
    }

    // Enable/disable signup button based on password validation
    passwordInput.addEventListener('input', function() {
        const isValid = validatePassword(this.value);
        signupBtn.disabled = !(isValid &amp;&amp; confirmPasswordInput.value === this.value);
    });

    // Confirm password validation
    confirmPasswordInput.addEventListener('input', function() {
        if (this.value !== passwordInput.value) {
            showError(this, 'Passwords do not match');
            signupBtn.disabled = true;
        } else {
            clearError(this);
            if (validatePassword(passwordInput.value)) signupBtn.disabled = false;
        }
    });

    // Validate email on blur
    emailInput.addEventListener('blur', function() {
        if (!validateEmail(this.value)) showError(this, 'Invalid email');
        else clearError(this);
    });

    // Validate age on blur
    ageInput.addEventListener('blur', function() {
        const age = parseInt(this.value);
        if (age &lt; 13) showError(this, 'You must be at least 13 years old');
        else if (age > 120) showError(this, 'Enter a valid age');
        else clearError(this);
    });

    /**
     * Handle form submission
     */
    form.addEventListener('submit', async function(e) {
        e.preventDefault();
        form.querySelectorAll('input').forEach(input => clearError(input));

        const formData = {
            name: firstNameInput.value.trim(),
            lastname: lastNameInput.value.trim(),
            age: parseInt(ageInput.value),
            email: emailInput.value.trim(),
            password: passwordInput.value
        };

        let hasErrors = false;

        if (!formData.name) { showError(firstNameInput, 'First name is required'); hasErrors = true; }
        if (!formData.lastname) { showError(lastNameInput, 'Last name is required'); hasErrors = true; }
        if (!formData.age || formData.age &lt; 13) { showError(ageInput, 'Invalid age'); hasErrors = true; }
        if (!validateEmail(formData.email)) { showError(emailInput, 'Invalid email'); hasErrors = true; }
        if (!validatePassword(formData.password)) { showError(passwordInput, 'Password does not meet requirements'); hasErrors = true; }
        if (confirmPasswordInput.value !== formData.password) { showError(confirmPasswordInput, 'Passwords do not match'); hasErrors = true; }
        if (hasErrors) return;

        btnText.style.display = 'none';
        spinner.classList.remove('hidden');
        signupBtn.disabled = true;

        const result = await signup(formData);

        btnText.style.display = 'inline';
        spinner.classList.add('hidden');

        if (result.success) {
            showToast('Account successfully created', 'success');
            setTimeout(() => { window.location.href = '/login'; }, 2000);
        } else {
            showToast(result.error);
            signupBtn.disabled = false;
        }
    });
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#API_URL">API_URL</a></li><li><a href="global.html#checkAuth">checkAuth</a></li><li><a href="global.html#createTask">createTask</a></li><li><a href="global.html#deleteTask">deleteTask</a></li><li><a href="global.html#errorMessage">errorMessage</a></li><li><a href="global.html#form">form</a></li><li><a href="global.html#getAllTasks">getAllTasks</a></li><li><a href="global.html#getLoginFormErrors">getLoginFormErrors</a></li><li><a href="global.html#getSignupFormErrors">getSignupFormErrors</a></li><li><a href="global.html#getTask">getTask</a></li><li><a href="global.html#getToken">getToken</a></li><li><a href="global.html#isAuthenticated">isAuthenticated</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#nameInput">nameInput</a></li><li><a href="global.html#removeToken">removeToken</a></li><li><a href="global.html#rules">rules</a></li><li><a href="global.html#saveToken">saveToken</a></li><li><a href="global.html#setInvalid">setInvalid</a></li><li><a href="global.html#setValid">setValid</a></li><li><a href="global.html#signup">signup</a></li><li><a href="global.html#updatePasswordRules">updatePasswordRules</a></li><li><a href="global.html#updateTask">updateTask</a></li><li><a href="global.html#updateUser">updateUser</a></li><li><a href="global.html#validateTask">validateTask</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Tue Sep 23 2025 00:37:12 GMT-0500 (hora est√°ndar de Colombia)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
